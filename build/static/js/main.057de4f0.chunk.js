(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{135:function(e,t,n){},166:function(e,t){},169:function(e,t,n){},170:function(e,t,n){"use strict";n.r(t);var a=n(4),c=n(0),r=n.n(c),o=n(16),i=n.n(o),l=(n(135),n(17)),s=n.n(l),u=n(32),j=n(9),d=n(26),b=n(2),p=n(212),h=n(237),O=n(233),f=n(234),g=n(104),x=n.n(g),m=n(221),v=n(227),y=n(220),C=n(231),S=n(230),w=n(226),k=n(228),L=n(239),I=n(229),N=n(238),P=n(243),E=n(244),_=n(211),D=n(242),A=n(225),T=n(68),z=n(241),R=n(219),W=n(217),F=n(218),J=n(216);function U(e){var t=e.open,n=e.handleClose,c=e.handleDelete;return Object(a.jsx)("div",{children:Object(a.jsxs)(z.a,{open:t,onClose:n,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(a.jsx)(J.a,{id:"alert-dialog-title",children:"Delete Confirm"}),Object(a.jsx)(W.a,{children:Object(a.jsx)(F.a,{id:"alert-dialog-description",children:"Are you sure to delete the record?"})}),Object(a.jsxs)(R.a,{children:[Object(a.jsx)(y.a,{onClick:n,color:"primary",children:"Cancel"}),Object(a.jsx)(y.a,{onClick:c,color:"primary",autoFocus:!0,children:"Ok"})]})]})})}var H=Object(m.a)({text:{width:"100%",marginBottom:16,marginRight:16}});function B(e){var t=e.open,n=e.handleClose,c=e.handleEdit,r=e.record,o=e.currentId,i=e.setEdit,l=H();return Object(a.jsx)("div",{children:Object(a.jsxs)(z.a,{open:t,onClose:n,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(a.jsx)(J.a,{id:"alert-dialog-title",children:"Edit form"}),Object(a.jsxs)(W.a,{children:[Object(a.jsx)(N.a,{label:"Location",value:r&&r.location,className:l.text,onChange:function(e){return i({location:e.target.value})},InputLabelProps:{shrink:!0}}),Object(a.jsx)(N.a,{label:"Latitude",type:"number",className:l.text,value:r&&r.lat,onChange:function(e){return i({lat:e.target.value})},InputLabelProps:{shrink:!0}}),Object(a.jsx)(N.a,{label:"Longitude",type:"number",className:l.text,value:r&&r.lng,onChange:function(e){return i({lng:e.target.value})},InputLabelProps:{shrink:!0}}),Object(a.jsx)(N.a,{label:"Count",type:"number",className:l.text,value:r&&r.count,onChange:function(e){return i({count:e.target.value})},InputLabelProps:{shrink:!0}})]}),Object(a.jsxs)(R.a,{children:[Object(a.jsx)(y.a,{onClick:n,color:"primary",children:"Cancel"}),Object(a.jsx)(y.a,{onClick:function(){return c({_id:o,location:r&&r.location,count:r&&r.count,lat:r&&r.lat,lng:r&&r.lng})},color:"primary",autoFocus:!0,children:"Update"})]})]})})}var q,M,V=n(236),Y=[{id:"date",label:"Last Update",minWidth:170},{id:"location",label:"Location",minWidth:170},{id:"count",label:"Cases",minWidth:170},{id:"actions",label:"Actions",minWidth:170}],K=Object(m.a)({root:{width:"100%"},container:{maxHeight:440},content:{padding:16},text:{width:"100%",marginBottom:16,marginRight:16}}),G=function(e){var t=e.casesData,n=e.onDelete,o=e.onAdd,i=e.onUpdate,l=e.zoom,b=e.center,p=e.greenIcon,h=K(),O=Object(c.useState)(0),f=Object(j.a)(O,2),g=f[0],m=f[1],z=Object(c.useState)(10),R=Object(j.a)(z,2),W=R[0],F=R[1],J=r.a.useState(!1),H=Object(j.a)(J,2),M=H[0],G=H[1],Q=r.a.useState(!1),X=Object(j.a)(Q,2),Z=X[0],$=X[1],ee=Object(c.useState)(null),te=Object(j.a)(ee,2),ne=te[0],ae=te[1],ce=Object(c.useState)(b),re=Object(j.a)(ce,2),oe=re[0],ie=re[1],le=Object(c.useState)(0),se=Object(j.a)(le,2),ue=se[0],je=se[1],de=Object(c.useState)(null),be=Object(j.a)(de,2),pe=be[0],he=be[1],Oe=Object(c.useState)(""),fe=Object(j.a)(Oe,2),ge=fe[0],xe=fe[1],me=Object(c.useState)(""),ve=Object(j.a)(me,2),ye=ve[0],Ce=ve[1],Se=Object(c.useState)([]),we=Object(j.a)(Se,2),ke=we[0],Le=we[1],Ie=Object(c.useState)([]),Ne=Object(j.a)(Ie,2),Pe=Ne[0],Ee=Ne[1],_e=Object(c.useState)([]),De=Object(j.a)(_e,2),Ae=De[0],Te=De[1];function ze(){return(ze=Object(u.a)(s.a.mark((function e(t){var n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=".concat(t.lat,"&lon=").concat(t.lng));case 3:return n=e.sent,e.next=6,n.json();case 6:(a=e.sent)&&a.address&&xe(a.display_name),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}Object(c.useEffect)((function(){function e(){return(e=Object(u.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://nominatim.openstreetmap.org/search.php?q=".concat(ye,"&polygon_geojson=1&format=jsonv2"));case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,Ee(n.map((function(e){return Object.assign({},{title:e.display_name,payload:JSON.stringify(e)})}))),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[ye]),Object(c.useEffect)((function(){if(ke.length>0){var e=t.filter((function(e){return e.lat>ke[0][0]&&e.lng>ke[0][1]&&e.lat<ke[1][0]&&e.lng<ke[1][1]}));Te(e)}else Te(t)}),[ke,t]);var Re=Ae.length>0&&Ae.map((function(e){return e.count})).reduce((function(e,t){return e+t}),0),We=Re>0?Re:0;return Object(a.jsxs)("div",{className:h.root,children:[Object(a.jsx)(V.a,{id:"combo-box-demo1",className:h.text,options:Pe,getOptionLabel:function(e){return e.title},onChange:function(e,t){return function(e){var t=e&&e.payload&&JSON.parse(e.payload).boundingbox;Array.isArray(t)&&t.length>0?Le([[t[0],t[2]],[t[1],t[3]]]):Le([])}(t)},onInputChange:function(e,t){!function(e){clearTimeout(q),q=setTimeout((function(){Ce(e)}),1e3)}(t)},style:{width:300},renderInput:function(e){return Object(a.jsx)(N.a,Object(d.a)(Object(d.a)({},e),{},{label:"Select city and state"}))}}),Object(a.jsxs)("h2",{children:["Total Cases in rectangle range: ",We]}),Object(a.jsxs)(P.a,{center:b,zoom:l,onClick:function(e){ie(e.latlng),function(e){ze.apply(this,arguments)}(e.latlng)},children:[Object(a.jsx)(E.a,{url:"https://{s}.tile.osm.org/{z}/{x}/{y}.png"}),oe&&Object(a.jsx)(_.a,{position:oe,children:Object(a.jsxs)(D.a,{position:oe,children:["Current location: ",Object(a.jsx)("pre",{children:JSON.stringify(oe,null,2)})]})}),Ae.map((function(e){return Object(a.jsx)(_.a,{position:{lat:e.lat,lng:e.lng},icon:p,children:Object(a.jsxs)(D.a,{position:{lat:e.lat,lng:e.lng},children:[Object(a.jsxs)("span",{children:["Location: ",e.location]}),Object(a.jsxs)("pre",{children:["Cases: ",e.count]})]})})})),ke.length>0&&Object(a.jsx)(A.a,{bounds:ke}),Object(a.jsx)(T.a,{position:"topright",onChange:function(e){ie(e.latLng),xe(e.info)}})]}),Object(a.jsxs)("section",{className:h.content,children:[Object(a.jsx)(N.a,{label:"Location",value:ge,className:h.text,onChange:function(e){return xe(e.target.value)},InputLabelProps:{shrink:!0}}),Object(a.jsx)(N.a,{label:"Latitude",type:"number",className:h.text,value:oe&&oe.lat,onChange:function(e){return ie(e.target.value,oe.lng)},InputLabelProps:{shrink:!0}}),Object(a.jsx)(N.a,{label:"Longitude",type:"number",className:h.text,value:oe&&oe.lng,onChange:function(e){return ie(oe.lat,e.target.value)},InputLabelProps:{shrink:!0}}),Object(a.jsx)(N.a,{label:"Count",type:"number",className:h.text,value:ue,onChange:function(e){return je(e.target.value)},InputLabelProps:{shrink:!0}}),Object(a.jsx)(y.a,{onClick:function(){var e={location:ge,count:ue,lat:oe.lat,lng:oe.lng};""===ge?alert("Location is empty. Please pick a location."):o(e)},color:"primary",children:"Add New"})]}),Object(a.jsx)(U,{open:M,handleClose:function(){G(!1)},handleDelete:function(){G(!1),n(ne)}}),Ae&&Ae.find((function(e){return e._id===ne}))&&Object(a.jsx)(B,{open:Z,currentId:ne,record:pe,handleClose:function(){$(!1)},handleEdit:function(e){$(!1),i(e)},setEdit:function(e){he(Object(d.a)(Object(d.a)({},pe),e))}}),Object(a.jsx)(w.a,{className:h.container,children:Object(a.jsxs)(v.a,{stickyHeader:!0,"aria-label":"sticky table",children:[Object(a.jsx)(k.a,{children:Object(a.jsx)(I.a,{children:Y.map((function(e){return Object(a.jsx)(S.a,{align:e.align,style:{minWidth:e.minWidth},children:e.label},e.id)}))})}),Object(a.jsx)(C.a,{children:Array.isArray(Ae)&&Ae.slice(g*W,g*W+W).map((function(e){return Object(a.jsx)(I.a,{hover:!0,role:"checkbox",tabIndex:-1,children:Y.map((function(t){var n=e[t.id];return"date"===t.id?Object(a.jsx)(S.a,{align:t.align,children:x()(new Date(n)).format("YYYY/MM/DD HH:mm:ss").toString()},"".concat(t.id,"-").concat(e._id)):"actions"!==t.id?Object(a.jsx)(S.a,{align:t.align,children:t.format&&"number"===typeof n?t.format(n):n},"".concat(t.id,"-").concat(e._id)):Object(a.jsxs)(S.a,{children:[Object(a.jsx)(y.a,{onClick:function(){return t=e._id,ae(t),he(Ae.find((function(e){return e._id===t}))),void $(!0);var t},color:"primary",children:"Edit"}),Object(a.jsx)(y.a,{onClick:function(){return t=e._id,ae(t),void G(!0);var t},color:"primary",children:"Delete"})]},"action-".concat(e._id))}))},e._id)}))})]})}),Object(a.jsx)(L.a,{rowsPerPageOptions:[10,25,100],component:"div",count:Ae.length,rowsPerPage:W,page:g,onChangePage:function(e,t){m(t)},onChangeRowsPerPage:function(e){F(+e.target.value),m(0)}})]})},Q=function(e,t){return e.casesData===t.casesData},X=r.a.memo(G,Q),Z=n(232),$=n(11),ee=n.n($),te=Object(m.a)({text:{width:"100%",marginBottom:16,marginRight:16}});function ne(e){var t=e.center,n=e.zoom,r=e.defaultRadius,o=e.casesData,i=e.greenIcon,l=te(),b=Object(c.useState)(t),p=Object(j.a)(b,2),h=p[0],O=p[1],f=Object(c.useState)(r),g=Object(j.a)(f,2),x=g[0],m=g[1],v=Object(c.useState)(0),y=Object(j.a)(v,2),C=y[0],S=y[1],w=Object(c.useState)(0),k=Object(j.a)(w,2),L=k[0],I=k[1],z=Object(c.useState)(""),R=Object(j.a)(z,2),W=R[0],F=R[1],J=Object(c.useState)([]),U=Object(j.a)(J,2),H=U[0],B=U[1],q=Object(c.useState)([]),Y=Object(j.a)(q,2),K=Y[0],G=Y[1];Object(c.useEffect)((function(){if(h){var e=new ee.a.LatLng(h.lat,h.lng),t=o.filter((function(e){return e.lat&&e.lng}));if(t.length>0){var n=t.filter((function(t){var n=new ee.a.LatLng(t.lat,t.lng);return e.distanceTo(n)<x})),a=n.length>0&&n.map((function(e){return e.count})).reduce((function(e,t){return e+t}),0);S(a>0?a:0)}}}),[x,h,o]),Object(c.useEffect)((function(){function e(){return(e=Object(u.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://nominatim.openstreetmap.org/search.php?q=".concat(W,"&polygon_geojson=1&format=jsonv2"));case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,G(n.map((function(e){return Object.assign({},{title:e.display_name,payload:JSON.stringify(e)})}))),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[W]),Object(c.useEffect)((function(){if(H.length>0){var e=o.filter((function(e){return e.lat>H[0][0]&&e.lng>H[0][1]&&e.lat<H[1][0]&&e.lng<H[1][1]})),t=e.length>0&&e.map((function(e){return e.count})).reduce((function(e,t){return e+t}),0);I(t>0?t:0)}}),[H,o]);return Object(a.jsxs)("div",{children:[Object(a.jsx)(V.a,{id:"combo-box-demo",className:l.text,options:K,getOptionLabel:function(e){return e.title},onChange:function(e,t){return function(e){var t=e&&e.payload&&JSON.parse(e.payload).boundingbox;Array.isArray(t)&&t.length>0?B([[t[0],t[2]],[t[1],t[3]]]):B([])}(t)},onInputChange:function(e,t){!function(e){clearTimeout(M),M=setTimeout((function(){F(e)}),1e3)}(t)},style:{width:300},renderInput:function(e){return Object(a.jsx)(N.a,Object(d.a)(Object(d.a)({},e),{},{label:"Select city and state"}))}}),Object(a.jsx)(N.a,{label:"Range",type:"number",defaultValue:x,className:l.text,onChange:function(e){return m(e.target.value)},InputLabelProps:{shrink:!0}}),Object(a.jsx)("br",{}),Object(a.jsxs)("h2",{children:["Total Cases in circle range: ",C]}),Object(a.jsxs)("h2",{children:["Total Cases in rectangle range: ",L]}),Object(a.jsx)("br",{}),Object(a.jsxs)(P.a,{center:t,zoom:n,onClick:function(e){O(e.latlng)},children:[Object(a.jsx)(E.a,{url:"https://{s}.tile.osm.org/{z}/{x}/{y}.png"}),h&&Object(a.jsxs)(_.a,{position:h,children:[Object(a.jsxs)(D.a,{position:h,children:["Current location: ",Object(a.jsx)("pre",{children:JSON.stringify(h,null,2)})]}),Object(a.jsx)(Z.a,{center:{lat:h.lat,lng:h.lng},fillColor:"blue",radius:x})]}),o.map((function(e){return Object(a.jsx)(_.a,{position:{lat:e.lat,lng:e.lng},icon:i,children:Object(a.jsxs)(D.a,{position:{lat:e.lat,lng:e.lng},children:[Object(a.jsxs)("span",{children:["Location: ",e.location]}),Object(a.jsxs)("pre",{children:["Cases: ",e.count]})]})})})),H.length>0&&Object(a.jsx)(A.a,{bounds:H}),Object(a.jsx)(T.a,{position:"topright",onChange:function(e){O(e.latLng)}})]})]})}var ae=n(70),ce=n(108),re=n.n(ce),oe="https://boiling-tor-57674.herokuapp.com:".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).PORT),ie=re()(oe);function le(e){var t=e.children,n=e.value,c=e.index,r=Object(b.a)(e,["children","value","index"]);return Object(a.jsx)("div",Object(d.a)(Object(d.a)({role:"tabpanel",hidden:n!==c,id:"wrapped-tabpanel-".concat(c),"aria-labelledby":"wrapped-tab-".concat(c)},r),{},{children:n===c&&Object(a.jsx)(f.a,{p:3,children:t})}))}var se={zoom:12,center:{lat:40.719176490550595,lng:-73.98377895355226},radius:3e3},ue=new(ee.a.Icon.extend({options:{iconSize:[38,95],shadowSize:[50,64],iconAnchor:[22,94],shadowAnchor:[4,62],popupAnchor:[-3,-76]}}))({iconUrl:"http://leafletjs.com/examples/custom-icons/leaf-green.png",shadowUrl:"http://leafletjs.com/examples/custom-icons/leaf-shadow.png"});function je(){var e=Object(c.useState)([]),t=Object(j.a)(e,2),n=t[0],o=t[1],i=r.a.useState(0),l=Object(j.a)(i,2),d=l[0],b=l[1];function f(){return(f=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ie.emit("delete-record",t);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(){return(g=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ie.emit("edit-record",t);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(){return(x=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ie.emit("add-record",t);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(c.useEffect)((function(){ie.on("FromAPI",(function(e){var t,a;t=e,a=n,Object(ae.isEmpty)(Object(ae.xorWith)(t,a,ae.isEqual))||o(e)}))}));return Object(a.jsxs)(p.a,{square:!0,children:[Object(a.jsxs)(h.a,{value:d,indicatorColor:"primary",textColor:"primary",onChange:function(e,t){b(t)},"aria-label":"disabled tabs example",children:[Object(a.jsx)(O.a,{label:"Map View"}),Object(a.jsx)(O.a,{label:"Edit View"})]}),Object(a.jsx)(le,{value:d,index:0,children:Object(a.jsx)(ne,{casesData:n,zoom:se.zoom,defaultRadius:se.radius,center:se.center,greenIcon:ue})}),Object(a.jsx)(le,{value:d,index:1,children:Object(a.jsx)(X,{casesData:n,onDelete:function(e){return f.apply(this,arguments)},onUpdate:function(e){return g.apply(this,arguments)},onAdd:function(e){return x.apply(this,arguments)},zoom:se.zoom,center:se.center,greenIcon:ue})})]})}n(169);var de=function(){return Object(a.jsx)("div",{className:"App",children:Object(a.jsx)(je,{})})},be=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,248)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),a(e),c(e),r(e),o(e)}))};i.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(de,{})}),document.getElementById("root")),be()}},[[170,1,2]]]);
//# sourceMappingURL=main.057de4f0.chunk.js.map