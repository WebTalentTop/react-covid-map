(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{135:function(e,t,n){},166:function(e,t){},169:function(e,t,n){},170:function(e,t,n){"use strict";n.r(t);var a=n(4),c=n(0),r=n.n(c),o=n(16),i=n.n(o),l=(n(135),n(17)),s=n.n(l),u=n(32),j=n(9),b=n(26),d=n(2),p=n(212),h=n(237),O=n(233),f=n(234),g=n(104),x=n.n(g),m=n(221),v=n(227),y=n(220),C=n(231),w=n(230),S=n(226),k=n(228),L=n(239),I=n(229),N=n(238),P=n(243),A=n(244),D=n(211),E=n(242),_=n(225),z=n(68),T=n(241),J=n(219),F=n(217),R=n(218),W=n(216);function U(e){var t=e.open,n=e.handleClose,c=e.handleDelete;return Object(a.jsx)("div",{children:Object(a.jsxs)(T.a,{open:t,onClose:n,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(a.jsx)(W.a,{id:"alert-dialog-title",children:"Delete Confirm"}),Object(a.jsx)(F.a,{children:Object(a.jsx)(R.a,{id:"alert-dialog-description",children:"Are you sure to delete the record?"})}),Object(a.jsxs)(J.a,{children:[Object(a.jsx)(y.a,{onClick:n,color:"primary",children:"Cancel"}),Object(a.jsx)(y.a,{onClick:c,color:"primary",autoFocus:!0,children:"Ok"})]})]})})}var B=Object(m.a)({text:{width:"100%",marginBottom:16,marginRight:16}});function q(e){var t=e.open,n=e.handleClose,c=e.handleEdit,r=e.record,o=e.currentId,i=e.setEdit,l=B();return Object(a.jsx)("div",{children:Object(a.jsxs)(T.a,{open:t,onClose:n,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(a.jsx)(W.a,{id:"alert-dialog-title",children:"Edit form"}),Object(a.jsxs)(F.a,{children:[Object(a.jsx)(N.a,{label:"Location",value:r&&r.location,className:l.text,onChange:function(e){return i({location:e.target.value})},InputLabelProps:{shrink:!0}}),Object(a.jsx)(N.a,{label:"Latitude",type:"number",className:l.text,value:r&&r.lat,onChange:function(e){return i({lat:e.target.value})},InputLabelProps:{shrink:!0}}),Object(a.jsx)(N.a,{label:"Longitude",type:"number",className:l.text,value:r&&r.lng,onChange:function(e){return i({lng:e.target.value})},InputLabelProps:{shrink:!0}}),Object(a.jsx)(N.a,{label:"Count",type:"number",className:l.text,value:r&&r.count,onChange:function(e){return i({count:e.target.value})},InputLabelProps:{shrink:!0}})]}),Object(a.jsxs)(J.a,{children:[Object(a.jsx)(y.a,{onClick:n,color:"primary",children:"Cancel"}),Object(a.jsx)(y.a,{onClick:function(){return c({_id:o,location:r&&r.location,count:r&&r.count,lat:r&&r.lat,lng:r&&r.lng})},color:"primary",autoFocus:!0,children:"Update"})]})]})})}var H,M,Y=n(236),V=[{id:"date",label:"Last Update",minWidth:170},{id:"location",label:"Location",minWidth:170},{id:"count",label:"Cases",minWidth:170},{id:"actions",label:"Actions",minWidth:170}],G=Object(m.a)({root:{width:"100%"},container:{maxHeight:440},content:{padding:16},text:{width:"100%",marginBottom:16,marginRight:16}}),K=function(e){var t=e.casesData,n=e.onDelete,o=e.onAdd,i=e.onUpdate,l=e.zoom,d=e.center,p=e.greenIcon,h=G(),O=Object(c.useState)(0),f=Object(j.a)(O,2),g=f[0],m=f[1],T=Object(c.useState)(10),J=Object(j.a)(T,2),F=J[0],R=J[1],W=r.a.useState(!1),B=Object(j.a)(W,2),M=B[0],K=B[1],Q=r.a.useState(!1),X=Object(j.a)(Q,2),Z=X[0],$=X[1],ee=Object(c.useState)(null),te=Object(j.a)(ee,2),ne=te[0],ae=te[1],ce=Object(c.useState)(d),re=Object(j.a)(ce,2),oe=re[0],ie=re[1],le=Object(c.useState)(0),se=Object(j.a)(le,2),ue=se[0],je=se[1],be=Object(c.useState)(null),de=Object(j.a)(be,2),pe=de[0],he=de[1],Oe=Object(c.useState)(""),fe=Object(j.a)(Oe,2),ge=fe[0],xe=fe[1],me=Object(c.useState)(""),ve=Object(j.a)(me,2),ye=ve[0],Ce=ve[1],we=Object(c.useState)([]),Se=Object(j.a)(we,2),ke=Se[0],Le=Se[1],Ie=Object(c.useState)([]),Ne=Object(j.a)(Ie,2),Pe=Ne[0],Ae=Ne[1],De=Object(c.useState)([]),Ee=Object(j.a)(De,2),_e=Ee[0],ze=Ee[1];function Te(){return(Te=Object(u.a)(s.a.mark((function e(t){var n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=".concat(t.lat,"&lon=").concat(t.lng));case 3:return n=e.sent,e.next=6,n.json();case 6:(a=e.sent)&&a.address&&xe(a.display_name),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}Object(c.useEffect)((function(){function e(){return(e=Object(u.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://nominatim.openstreetmap.org/search.php?q=".concat(ye,"&polygon_geojson=1&format=jsonv2"));case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,Ae(n.map((function(e){return Object.assign({},{title:e.display_name,payload:JSON.stringify(e)})}))),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[ye]),Object(c.useEffect)((function(){if(ke.length>0){var e=t.filter((function(e){return e.lat>ke[0][0]&&e.lng>ke[0][1]&&e.lat<ke[1][0]&&e.lng<ke[1][1]}));ze(e)}else ze(t)}),[ke,t]);var Je=_e.length>0&&_e.map((function(e){return e.count})).reduce((function(e,t){return e+t}),0),Fe=Je>0?Je:0;return Object(a.jsxs)("div",{className:h.root,children:[Object(a.jsx)(Y.a,{id:"combo-box-demo1",className:h.text,options:Pe,getOptionLabel:function(e){return e.title},onChange:function(e,t){return function(e){var t=e&&e.payload&&JSON.parse(e.payload).boundingbox;Array.isArray(t)&&t.length>0?Le([[t[0],t[2]],[t[1],t[3]]]):Le([])}(t)},onInputChange:function(e,t){!function(e){clearTimeout(H),H=setTimeout((function(){Ce(e)}),1e3)}(t)},style:{width:300},renderInput:function(e){return Object(a.jsx)(N.a,Object(b.a)(Object(b.a)({},e),{},{label:"Select city and state"}))}}),Object(a.jsxs)("h2",{children:["Total Cases in rectangle range: ",Fe]}),Object(a.jsxs)(P.a,{center:d,zoom:l,onClick:function(e){ie(e.latlng),function(e){Te.apply(this,arguments)}(e.latlng)},children:[Object(a.jsx)(A.a,{url:"https://{s}.tile.osm.org/{z}/{x}/{y}.png"}),oe&&Object(a.jsx)(D.a,{position:oe,children:Object(a.jsxs)(E.a,{position:oe,children:["Current location: ",Object(a.jsx)("pre",{children:JSON.stringify(oe,null,2)})]})}),_e.map((function(e){return Object(a.jsx)(D.a,{position:{lat:e.lat,lng:e.lng},icon:p,children:Object(a.jsxs)(E.a,{position:{lat:e.lat,lng:e.lng},children:[Object(a.jsxs)("span",{children:["Location: ",e.location]}),Object(a.jsxs)("pre",{children:["Cases: ",e.count]})]})})})),ke.length>0&&Object(a.jsx)(_.a,{bounds:ke}),Object(a.jsx)(z.a,{position:"topright",onChange:function(e){ie(e.latLng),xe(e.info)}})]}),Object(a.jsxs)("section",{className:h.content,children:[Object(a.jsx)(N.a,{label:"Location",value:ge,className:h.text,onChange:function(e){return xe(e.target.value)},InputLabelProps:{shrink:!0}}),Object(a.jsx)(N.a,{label:"Latitude",type:"number",className:h.text,value:oe&&oe.lat,onChange:function(e){return ie(e.target.value,oe.lng)},InputLabelProps:{shrink:!0}}),Object(a.jsx)(N.a,{label:"Longitude",type:"number",className:h.text,value:oe&&oe.lng,onChange:function(e){return ie(oe.lat,e.target.value)},InputLabelProps:{shrink:!0}}),Object(a.jsx)(N.a,{label:"Count",type:"number",className:h.text,value:ue,onChange:function(e){return je(e.target.value)},InputLabelProps:{shrink:!0}}),Object(a.jsx)(y.a,{onClick:function(){var e={location:ge,count:ue,lat:oe.lat,lng:oe.lng};""===ge?alert("Location is empty. Please pick a location."):o(e)},color:"primary",children:"Add New"})]}),Object(a.jsx)(U,{open:M,handleClose:function(){K(!1)},handleDelete:function(){K(!1),n(ne)}}),_e&&_e.find((function(e){return e._id===ne}))&&Object(a.jsx)(q,{open:Z,currentId:ne,record:pe,handleClose:function(){$(!1)},handleEdit:function(e){$(!1),i(e)},setEdit:function(e){he(Object(b.a)(Object(b.a)({},pe),e))}}),Object(a.jsx)(S.a,{className:h.container,children:Object(a.jsxs)(v.a,{stickyHeader:!0,"aria-label":"sticky table",children:[Object(a.jsx)(k.a,{children:Object(a.jsx)(I.a,{children:V.map((function(e){return Object(a.jsx)(w.a,{align:e.align,style:{minWidth:e.minWidth},children:e.label},e.id)}))})}),Object(a.jsx)(C.a,{children:Array.isArray(_e)&&_e.slice(g*F,g*F+F).map((function(e){return Object(a.jsx)(I.a,{hover:!0,role:"checkbox",tabIndex:-1,children:V.map((function(t){var n=e[t.id];return"date"===t.id?Object(a.jsx)(w.a,{align:t.align,children:x()(new Date(n)).format("YYYY/MM/DD HH:mm:ss").toString()},"".concat(t.id,"-").concat(e._id)):"actions"!==t.id?Object(a.jsx)(w.a,{align:t.align,children:t.format&&"number"===typeof n?t.format(n):n},"".concat(t.id,"-").concat(e._id)):Object(a.jsxs)(w.a,{children:[Object(a.jsx)(y.a,{onClick:function(){return t=e._id,ae(t),he(_e.find((function(e){return e._id===t}))),void $(!0);var t},color:"primary",children:"Edit"}),Object(a.jsx)(y.a,{onClick:function(){return t=e._id,ae(t),void K(!0);var t},color:"primary",children:"Delete"})]},"action-".concat(e._id))}))},e._id)}))})]})}),Object(a.jsx)(L.a,{rowsPerPageOptions:[10,25,100],component:"div",count:_e.length,rowsPerPage:F,page:g,onChangePage:function(e,t){m(t)},onChangeRowsPerPage:function(e){R(+e.target.value),m(0)}})]})},Q=function(e,t){return e.casesData===t.casesData},X=r.a.memo(K,Q),Z=n(232),$=n(11),ee=n.n($),te=Object(m.a)({text:{width:"100%",marginBottom:16,marginRight:16}});function ne(e){var t=e.center,n=e.zoom,r=e.defaultRadius,o=e.casesData,i=e.greenIcon,l=te(),d=Object(c.useState)(t),p=Object(j.a)(d,2),h=p[0],O=p[1],f=Object(c.useState)(r),g=Object(j.a)(f,2),x=g[0],m=g[1],v=Object(c.useState)(0),y=Object(j.a)(v,2),C=y[0],w=y[1],S=Object(c.useState)(0),k=Object(j.a)(S,2),L=k[0],I=k[1],T=Object(c.useState)(""),J=Object(j.a)(T,2),F=J[0],R=J[1],W=Object(c.useState)([]),U=Object(j.a)(W,2),B=U[0],q=U[1],H=Object(c.useState)([]),V=Object(j.a)(H,2),G=V[0],K=V[1];Object(c.useEffect)((function(){if(h){var e=new ee.a.LatLng(h.lat,h.lng),t=o.filter((function(e){return e.lat&&e.lng}));if(t.length>0){var n=t.filter((function(t){var n=new ee.a.LatLng(t.lat,t.lng);return e.distanceTo(n)<x})),a=n.length>0&&n.map((function(e){return e.count})).reduce((function(e,t){return e+t}),0);w(a>0?a:0)}}}),[x,h,o]),Object(c.useEffect)((function(){function e(){return(e=Object(u.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://nominatim.openstreetmap.org/search.php?q=".concat(F,"&polygon_geojson=1&format=jsonv2"));case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,K(n.map((function(e){return Object.assign({},{title:e.display_name,payload:JSON.stringify(e)})}))),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[F]),Object(c.useEffect)((function(){if(B.length>0){var e=o.filter((function(e){return e.lat>B[0][0]&&e.lng>B[0][1]&&e.lat<B[1][0]&&e.lng<B[1][1]})),t=e.length>0&&e.map((function(e){return e.count})).reduce((function(e,t){return e+t}),0);I(t>0?t:0)}}),[B,o]);return Object(a.jsxs)("div",{children:[Object(a.jsx)(Y.a,{id:"combo-box-demo",className:l.text,options:G,getOptionLabel:function(e){return e.title},onChange:function(e,t){return function(e){var t=e&&e.payload&&JSON.parse(e.payload).boundingbox;Array.isArray(t)&&t.length>0?q([[t[0],t[2]],[t[1],t[3]]]):q([])}(t)},onInputChange:function(e,t){!function(e){clearTimeout(M),M=setTimeout((function(){R(e)}),1e3)}(t)},style:{width:300},renderInput:function(e){return Object(a.jsx)(N.a,Object(b.a)(Object(b.a)({},e),{},{label:"Select city and state"}))}}),Object(a.jsx)(N.a,{label:"Range",type:"number",defaultValue:x,className:l.text,onChange:function(e){return m(e.target.value)},InputLabelProps:{shrink:!0}}),Object(a.jsx)("br",{}),Object(a.jsxs)("h2",{children:["Total Cases in circle range: ",C]}),Object(a.jsxs)("h2",{children:["Total Cases in rectangle range: ",L]}),Object(a.jsx)("br",{}),Object(a.jsxs)(P.a,{center:t,zoom:n,onClick:function(e){O(e.latlng)},children:[Object(a.jsx)(A.a,{url:"https://{s}.tile.osm.org/{z}/{x}/{y}.png"}),h&&Object(a.jsxs)(D.a,{position:h,children:[Object(a.jsxs)(E.a,{position:h,children:["Current location: ",Object(a.jsx)("pre",{children:JSON.stringify(h,null,2)})]}),Object(a.jsx)(Z.a,{center:{lat:h.lat,lng:h.lng},fillColor:"blue",radius:x})]}),o.map((function(e){return Object(a.jsx)(D.a,{position:{lat:e.lat,lng:e.lng},icon:i,children:Object(a.jsxs)(E.a,{position:{lat:e.lat,lng:e.lng},children:[Object(a.jsxs)("span",{children:["Location: ",e.location]}),Object(a.jsxs)("pre",{children:["Cases: ",e.count]})]})})})),B.length>0&&Object(a.jsx)(_.a,{bounds:B}),Object(a.jsx)(z.a,{position:"topright",onChange:function(e){O(e.latLng)}})]})]})}var ae=n(70),ce=n(108),re=n.n(ce)()("http://127.0.0.1:7000");function oe(e){var t=e.children,n=e.value,c=e.index,r=Object(d.a)(e,["children","value","index"]);return Object(a.jsx)("div",Object(b.a)(Object(b.a)({role:"tabpanel",hidden:n!==c,id:"wrapped-tabpanel-".concat(c),"aria-labelledby":"wrapped-tab-".concat(c)},r),{},{children:n===c&&Object(a.jsx)(f.a,{p:3,children:t})}))}var ie={zoom:12,center:{lat:40.719176490550595,lng:-73.98377895355226},radius:3e3},le=new(ee.a.Icon.extend({options:{iconSize:[38,95],shadowSize:[50,64],iconAnchor:[22,94],shadowAnchor:[4,62],popupAnchor:[-3,-76]}}))({iconUrl:"http://leafletjs.com/examples/custom-icons/leaf-green.png",shadowUrl:"http://leafletjs.com/examples/custom-icons/leaf-shadow.png"});function se(){var e=Object(c.useState)([]),t=Object(j.a)(e,2),n=t[0],o=t[1],i=r.a.useState(0),l=Object(j.a)(i,2),b=l[0],d=l[1];function f(){return(f=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:re.emit("delete-record",t);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(){return(g=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:re.emit("edit-record",t);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(){return(x=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:re.emit("add-record",t);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(c.useEffect)((function(){re.on("FromAPI",(function(e){var t,a;t=e,a=n,Object(ae.isEmpty)(Object(ae.xorWith)(t,a,ae.isEqual))||o(e)}))}));return Object(a.jsxs)(p.a,{square:!0,children:[Object(a.jsxs)(h.a,{value:b,indicatorColor:"primary",textColor:"primary",onChange:function(e,t){d(t)},"aria-label":"disabled tabs example",children:[Object(a.jsx)(O.a,{label:"Map View"}),Object(a.jsx)(O.a,{label:"Edit View"})]}),Object(a.jsx)(oe,{value:b,index:0,children:Object(a.jsx)(ne,{casesData:n,zoom:ie.zoom,defaultRadius:ie.radius,center:ie.center,greenIcon:le})}),Object(a.jsx)(oe,{value:b,index:1,children:Object(a.jsx)(X,{casesData:n,onDelete:function(e){return f.apply(this,arguments)},onUpdate:function(e){return g.apply(this,arguments)},onAdd:function(e){return x.apply(this,arguments)},zoom:ie.zoom,center:ie.center,greenIcon:le})})]})}n(169);var ue=function(){return Object(a.jsx)("div",{className:"App",children:Object(a.jsx)(se,{})})},je=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,248)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),a(e),c(e),r(e),o(e)}))};i.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(ue,{})}),document.getElementById("root")),je()}},[[170,1,2]]]);
//# sourceMappingURL=main.7d95f18a.chunk.js.map